name: Daily Site Rebuild

on:
  schedule:
    # Run daily at 00:05 UTC (just after midnight)
    - cron: '5 0 * * *'
  workflow_dispatch: # Allow manual triggers

jobs:
  trigger-vercel-rebuild:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Vercel Deploy Hook
        run: |
          curl -X POST "${{ secrets.VERCEL_DEPLOY_HOOK }}"
        env:
          VERCEL_DEPLOY_HOOK: ${{ secrets.VERCEL_DEPLOY_HOOK }}
      
      - name: Log deployment trigger
        run: |
          echo "Triggered Vercel rebuild at $(date)"
          echo "New passage should be available shortly"
